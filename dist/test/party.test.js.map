{"version":3,"sources":["../../app/test/party.test.js"],"names":["chai","use","chaiHttp","should","describe","invalidData","name","hqAddress","ValidData","logoUrl","it","done","request","server","post","send","end","req","res","body","be","a","status","equal","include","keys","error","data","length","get","invalidId","validId","validData","patch","delete","message"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport server from '../server';\r\n\r\nchai.use(chaiHttp);\r\n// eslint-disable-next-line no-unused-vars\r\nconst should = chai.should();\r\n\r\ndescribe('Party endpoints', () => {\r\n  describe('POST /api/v1/parties', () => {\r\n    const invalidData = {\r\n      name: 'ANPP',\r\n      hqAddress: 'Abuja',\r\n    };\r\n\r\n    const ValidData = {\r\n      name: 'ANPP',\r\n      hqAddress: 'Abuja',\r\n      logoUrl: 'http://cloudinary.com/img.jpg',\r\n    };\r\n    it('should return a validation error for missing fields', (done) => {\r\n      chai.request(server)\r\n        .post('/api/v1/parties')\r\n        .send(invalidData)\r\n        .end((req, res) => {\r\n          res.body.should.be.a('object');\r\n          res.body.status.should.equal(400);\r\n          res.body.should.include.keys('error');\r\n          res.body.error.should.equal('Kindly enter all fields');\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should create new party and return success response', (done) => {\r\n      chai.request(server)\r\n        .post('/api/v1/parties')\r\n        .send(ValidData)\r\n        .end((req, res) => {\r\n          res.body.should.be.a('object');\r\n          res.body.status.should.equal(201);\r\n          res.body.should.include.keys('data');\r\n          res.body.data.should.be.a('array');\r\n          res.body.data.length.should.equal(1);\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/parties', () => {\r\n    it('should get all parties', (done) => {\r\n      chai.request(server)\r\n        .get('/api/v1/parties')\r\n        .end((req, res) => {\r\n          res.body.should.be.a('object');\r\n          res.body.status.should.equal(200);\r\n          res.body.should.include.keys('data');\r\n          res.body.data.should.be.a('array');\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/parties/:id', () => {\r\n    const invalidId = 'xx';\r\n    const validId = 1;\r\n    it('should return a party not found response', (done) => {\r\n      chai.request(server)\r\n        .get(`/api/v1/parties/${invalidId}`)\r\n        .end((req, res) => {\r\n          res.body.should.be.a('object');\r\n          res.body.status.should.equal(404);\r\n          res.body.should.include.keys('error');\r\n          res.body.error.should.equal(`Party with id ${invalidId} not found`);\r\n          done();\r\n        });\r\n    });\r\n\r\n    it('should return a single party record', (done) => {\r\n      chai.request(server)\r\n        .get(`/api/v1/parties/${validId}`)\r\n        .end((req, res) => {\r\n          res.body.should.be.a('object');\r\n          res.body.status.should.equal(200);\r\n          res.body.should.include.keys('data');\r\n          res.body.data.should.be.a('array');\r\n          res.body.data.length.should.equal(1);\r\n          done();\r\n        });\r\n    });\r\n  });\r\n\r\n})\r\n\r\ndescribe('PATCH /api/v1/parties/:id', () => {\r\n  const invalidData = {\r\n    name: 'ANPP',\r\n    hqAddress: 'Abuja',\r\n  };\r\n\r\n  const validData = {\r\n    name: 'ANPP',\r\n    hqAddress: 'Abuja',\r\n    logoUrl: 'http://cloudinary.com/img.jpg',\r\n  };\r\n\r\n  const validId = 2;\r\n  const invalidId = 'xx';\r\n  it('should return a validation error for missing fields', (done) => {\r\n    chai.request(server)\r\n      .patch(`/api/v1/parties/${validId}`)\r\n      .send(invalidData)\r\n      .end((req, res) => {\r\n        res.body.should.be.a('object');\r\n        res.body.status.should.equal(400);\r\n        res.body.should.include.keys('error');\r\n        res.body.error.should.equal('All fields are required');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('should update a party and return success response', (done) => {\r\n    chai.request(server)\r\n      .patch(`/api/v1/parties/${validId}`)\r\n      .send(validData)\r\n      .end((req, res) => {\r\n        res.body.should.be.a('object');\r\n        res.body.status.should.equal(200);\r\n        res.body.should.include.keys('data');\r\n        res.body.data.should.be.a('array');\r\n        res.body.data.length.should.equal(1);\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('should return a party not found response', (done) => {\r\n    chai.request(server)\r\n      .patch(`/api/v1/parties/${invalidId}`)\r\n      .send(validData)\r\n      .end((req, res) => {\r\n        res.body.should.be.a('object');\r\n        res.body.status.should.equal(404);\r\n        res.body.should.include.keys('error');\r\n        res.body.error.should.equal(`Party with id of ${invalidId} not found`);\r\n        done();\r\n      });\r\n  });\r\n});\r\ndescribe('DELETE /api/v1/parties/:id', () => {\r\n  const invalidId = 'xx';\r\n  const validId = 1;\r\n  it('should return a party not found response', (done) => {\r\n    chai.request(server)\r\n      .delete(`/api/v1/parties/${invalidId}`)\r\n      .end((req, res) => {\r\n        res.body.should.be.a('object');\r\n        res.body.status.should.equal(404);\r\n        res.body.should.include.keys('error');\r\n        res.body.error.should.equal(`Party with id of ${invalidId} not found`);\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('should delete a party record and return a success response', (done) => {\r\n    chai.request(server)\r\n      .delete(`/api/v1/parties/${validId}`)\r\n      .end((req, res) => {\r\n        res.body.should.be.a('object');\r\n        res.body.status.should.equal(204);\r\n        res.body.should.include.keys('data');\r\n        res.body.data.should.be.a('array');\r\n        res.body.data[0].should.include.keys('message');\r\n        res.body.data[0].message.should.equal('Party deleted succesfully');\r\n        done();\r\n      });\r\n  });\r\n});"],"file":"party.test.js"}